<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">
<a name=begin>
<body bgcolor=#33ccff>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="лаб6.files/filelist.xml">
<title>Индивидуальное задание</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>ААА</o:Author>
  <o:LastAuthor>ААА</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>7</o:TotalTime>
  <o:Created>2008-01-05T10:03:00Z</o:Created>
  <o:LastSaved>2008-01-05T10:03:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>1097</o:Words>
  <o:Characters>6255</o:Characters>
  <o:Company>Дом</o:Company>
  <o:Lines>52</o:Lines>
  <o:Paragraphs>14</o:Paragraphs>
  <o:CharactersWithSpaces>7338</o:CharactersWithSpaces>
  <o:Version>11.6568</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";}
h2
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:2;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
pre
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
p.bodyfirst, li.bodyfirst, div.bodyfirst
	{mso-style-name:body_first;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
p.bodytext, li.bodytext, div.bodytext
	{mso-style-name:body_text;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:2.0cm 42.5pt 2.0cm 3.0cm;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:43410643;
	mso-list-type:simple;
	mso-list-template-ids:-824655554;}
@list l0:level1
	{mso-level-text:"%1\. ";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:14.15pt;
	mso-level-legacy-space:0cm;
	margin-left:21.3pt;
	text-indent:-14.15pt;
	mso-ansi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ansi-font-weight:bold;
	mso-ansi-font-style:normal;
	text-decoration:none;
	text-underline:none;}
@list l1
	{mso-list-id:376511738;
	mso-list-type:simple;
	mso-list-template-ids:1884690388;}
@list l1:level1
	{mso-level-text:"%1\. ";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:14.15pt;
	mso-level-legacy-space:0cm;
	margin-left:14.15pt;
	text-indent:-14.15pt;
	mso-ansi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ansi-font-weight:normal;
	mso-ansi-font-style:normal;
	text-decoration:none;
	text-underline:none;}
@list l2
	{mso-list-id:634945118;
	mso-list-type:simple;
	mso-list-template-ids:-824655554;}
@list l2:level1
	{mso-level-text:"%1\. ";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:14.15pt;
	mso-level-legacy-space:0cm;
	margin-left:21.3pt;
	text-indent:-14.15pt;
	mso-ansi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ansi-font-weight:bold;
	mso-ansi-font-style:normal;
	text-decoration:none;
	text-underline:none;}
@list l3
	{mso-list-id:1744714607;
	mso-list-type:simple;
	mso-list-template-ids:1884690388;}
@list l3:level1
	{mso-level-text:"%1\. ";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:14.15pt;
	mso-level-legacy-space:0cm;
	margin-left:14.15pt;
	text-indent:-14.15pt;
	mso-ansi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ansi-font-weight:normal;
	mso-ansi-font-style:normal;
	text-decoration:none;
	text-underline:none;}
@list l4
	{mso-list-id:1801265782;
	mso-list-type:simple;
	mso-list-template-ids:1884690388;}
@list l4:level1
	{mso-level-text:"%1\. ";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:14.15pt;
	mso-level-legacy-space:0cm;
	margin-left:14.15pt;
	text-indent:-14.15pt;
	mso-ansi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ansi-font-weight:normal;
	mso-ansi-font-style:normal;
	text-decoration:none;
	text-underline:none;}
@list l5
	{mso-list-id:1893616065;
	mso-list-type:simple;
	mso-list-template-ids:1884690388;}
@list l5:level1
	{mso-level-text:"%1\. ";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:14.15pt;
	mso-level-legacy-space:0cm;
	margin-left:14.15pt;
	text-indent:-14.15pt;
	mso-ansi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ansi-font-weight:normal;
	mso-ansi-font-style:normal;
	text-decoration:none;
	text-underline:none;}
@list l6
	{mso-list-id:1940479910;
	mso-list-type:hybrid;
	mso-list-template-ids:-894641088 68747279 68747289 68747291 68747279 68747289 68747291 68747279 68747289 68747291;}
@list l6:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l7
	{mso-list-id:1995259570;
	mso-list-type:simple;
	mso-list-template-ids:-824655554;}
@list l7:level1
	{mso-level-text:"%1\. ";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:14.15pt;
	mso-level-legacy-space:0cm;
	margin-left:21.3pt;
	text-indent:-14.15pt;
	mso-ansi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ansi-font-weight:bold;
	mso-ansi-font-style:normal;
	text-decoration:none;
	text-underline:none;}
@list l8
	{mso-list-id:2125999557;
	mso-list-type:simple;
	mso-list-template-ids:-824655554;}
@list l8:level1
	{mso-level-text:"%1\. ";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:14.15pt;
	mso-level-legacy-space:0cm;
	margin-left:21.3pt;
	text-indent:-14.15pt;
	mso-ansi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-ansi-font-weight:bold;
	mso-ansi-font-style:normal;
	text-decoration:none;
	text-underline:none;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Обычная таблица";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=RU style='tab-interval:35.4pt'>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan;
mso-layout-grid-align:auto;text-autospace:ideograph-numeric ideograph-other'><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Лабораторная работа №6<o:p></o:p></span></b></p>

<p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan;
mso-layout-grid-align:auto;text-autospace:ideograph-numeric ideograph-other'><span
style='font-size:12.0pt;font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan;
mso-layout-grid-align:auto;text-autospace:ideograph-numeric ideograph-other'><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'>«Создание простейших<span class=GramE> .</span>СОМ и .ЕХЕ
программ»<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:92.15pt;text-indent:-92.15pt'><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Цель работы:</span></b><span style='font-size:12.0pt;
font-family:"Times New Roman"'> изучить форматы и правила работы транслятором
ТА</span><span class=GramE><span lang=EN-US style='font-size:12.0pt;font-family:
"Times New Roman";mso-ansi-language:EN-US'>SM</span></span><span
style='font-size:12.0pt;font-family:"Times New Roman"'>.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:92.15pt;text-indent:-92.15pt'><span
style='font-size:12.0pt;font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Оборудование:</span></b><span style='font-size:12.0pt;
font-family:"Times New Roman"'> </span><span class=GramE><span lang=EN-US
style='font-size:12.0pt;font-family:"Times New Roman";mso-ansi-language:EN-US'>IBM</span><span
style='font-size:12.0pt;font-family:"Times New Roman"'> - совместимый
персональный компьютер, работающий под управлением операционной системы,
совместимой с </span><span lang=EN-US style='font-size:12.0pt;font-family:"Times New Roman";
mso-ansi-language:EN-US'>MS</span><span style='font-size:12.0pt;font-family:
"Times New Roman"'>-</span><span lang=EN-US style='font-size:12.0pt;font-family:
"Times New Roman";mso-ansi-language:EN-US'>DOS<sup><span style='mso-char-type:
symbol;mso-symbol-font-family:"Times New Roman"'><span style='mso-char-type:
symbol;mso-symbol-font-family:"Times New Roman"'>®</span></span></sup></span><span
style='font-size:12.0pt;font-family:"Times New Roman"'>.</span></span><span
style='font-size:12.0pt;font-family:"Times New Roman"'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'><span
style='font-size:12.0pt;font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:widow-orphan;mso-layout-grid-align:
auto;text-autospace:ideograph-numeric ideograph-other'><b style='mso-bidi-font-weight:
normal'><span style='font-size:12.0pt;font-family:"Times New Roman"'>Программное
обеспечение: </span></b><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-size:12.0pt;font-family:"Times New Roman";mso-ansi-language:
EN-US'>TASM</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-size:12.0pt;font-family:"Times New Roman"'>4<o:p></o:p></span></b></p>

<p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan;
mso-layout-grid-align:auto;text-autospace:ideograph-numeric ideograph-other'><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><o:p>&nbsp;</o:p></span></b></p>

<h2>Программа типа СОМ</h2>

<p class=bodyfirst>Традиционно первая программа для освоения нового языка
программирования&nbsp;— программа, выводящая на экран текст «<span
class=SpellE>Hello</span> <span class=SpellE>world</span>!». </p>

<p class=bodyfirst style='text-indent:36.0pt'><span class=GramE>Итак, наберите
в любом текстовом редакторе, который может записывать файлы как обычный текст
(например:</span> <span class=GramE>EDIT.COM в DOS, встроенный редактор в <span
class=SpellE>Norton</span> <span class=SpellE>Commander</span> или аналогичной
программе, NOTEPAD в <span class=SpellE>Windows</span>), следующий текст:</span></p>

<pre>; <span class=SpellE>hello-l.asm</span></pre><pre>; Выводит на экран сообщение &quot;<span
class=SpellE>Hello</span> <span class=SpellE>World</span>!&quot; и завершается</pre><pre><span style='mso-spacerun:yes'>  </span><span style='mso-spacerun:yes'>      </span>.<span
class=SpellE>model</span><span style='mso-spacerun:yes'>     </span><span
class=SpellE>tiny</span><span class=GramE><span style='mso-spacerun:yes'>              </span>;</span> модель памяти, используемая для СОМ</pre><pre><span style='mso-spacerun:yes'>        </span>.<span
class=SpellE>code</span><span class=GramE><span style='mso-spacerun:yes'>                        </span>;</span> начало сегмента кода</pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE>org</span><span style='mso-spacerun:yes'>        </span>100h<span
class=GramE><span style='mso-spacerun:yes'>              </span>;</span> начальное значение счетчика - 100h</pre><pre><span
class=SpellE>start</span>:<span style='mso-spacerun:yes'>  </span><span
class=SpellE>mov</span><span style='mso-spacerun:yes'>        </span>ah,9<span
class=GramE><span style='mso-spacerun:yes'>              </span>;</span> номер функции DOS - в АН</pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE>mov</span><span style='mso-spacerun:yes'>        </span><span
class=SpellE>dx,offset</span> <span class=SpellE>message</span><span
class=GramE> ;</span> адрес строки - в DX</pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE>int</span><span style='mso-spacerun:yes'>        </span>21h<span
class=GramE><span style='mso-spacerun:yes'>               </span>;</span> вызов системной функции DOS</pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE>ret</span><span class=GramE><span style='mso-spacerun:yes'>                          </span>;</span> завершение <span
class=SpellE>СОМ-программы</span></pre><pre><span class=SpellE>message</span> <span
class=SpellE>db</span><span style='mso-spacerun:yes'>         </span>&quot;<span
class=SpellE>Hello</span> <span class=SpellE>World</span>!&quot;,0Dh,0Ah,'$'<span
class=GramE> ;</span> строка для вывода</pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE>end</span><span style='mso-spacerun:yes'>        </span><span
class=SpellE>start</span><span class=GramE><span style='mso-spacerun:yes'>             </span>;</span> конец программы</pre>

<p class=bodyfirst>и сохраните его как файл <span class=SpellE>hello-l.asm</span>.
Можно также использовать готовый файл с этим именем. Чтобы превратить программу
в исполнимый файл, сначала надо вызвать ассемблер, для того чтобы скомпилировать
ее в объектный файл с именем hello-1.obj, набрав в командной строке следующую
команду:</p>

<p class=bodytext>Для <span lang=EN-US style='mso-ansi-language:EN-US'>TASM</span>:</p>

<pre><span class=SpellE><span class=GramE><span lang=EN-US style='mso-ansi-language:
EN-US'>tasm</span></span></span><span lang=EN-US> </span><span lang=EN-US
style='mso-ansi-language:EN-US'>hello</span>-1.<span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>asm</span></span></pre>

<p class=bodytext>С ассемблерными программами также можно работать из
интегрированных сред разработки, как обычно работают с языками высокого уровня,
но в них обычно удобнее создавать процедуры на ассемблере, вызываемые из
программ на языке, для которого предназначена среда, а создание полноценных
программ на ассемблере требует некоторой перенастройки.</p>

<p class=bodytext>Формат объектных файлов, используемых всеми тремя
рассматриваемыми ассемблерами по умолчанию (OMF-формат), совпадает, так что
можно пользоваться ассемблером из одного пакета и компоновщиком из другого.</p>

<p class=bodytext>Для<span lang=EN-US style='mso-ansi-language:EN-US'> TLINK:<o:p></o:p></span></p>

<pre><span class=SpellE><span class=GramE><span lang=EN-US style='mso-ansi-language:
EN-US'>tlink</span></span></span><span lang=EN-US style='mso-ansi-language:
EN-US'> /t /x hello-1.obj<o:p></o:p></span></pre>

<p class=bodytext>Теперь получился файл HELLO-1.COM размером 23 байта. Если его
выполнить, на экране появится строка «<span class=SpellE>Hello</span> <span
class=SpellE>World</span>!» и программа завершится.</p>

<p class=bodytext>Рассмотрим исходный те<span class=GramE>кст пр</span>ограммы,
чтобы понять, как она работает.</p>

<p class=bodytext>Первая строка определяет модель памяти TINY, в которой
сегменты кода, данных и стека объединены. Эта модель предназначена для создания
файлов типа СОМ.</p>

<p class=bodytext>Директива .CODE начинает сегмент кода, который в <span
class=SpellE>нащем</span> случае также должен содержать и данные.</p>

<p class=bodyfirst>ORG 100h устанавливает значение программного счетчика в
100h, так как при загрузке <span class=SpellE><span class=GramE>СОМ-файла</span></span>
в память DOS занимает первые 256 байт (100h) блоком данных PSP и располагает
код программы только после этого блока. Все программы, которые компилируются в
файлы типа СОМ, должны начинаться с этой директивы.</p>

<p class=bodytext>Метка START <span class=GramE>располагается перед первой
командой в программе и</span> будет использоваться в директиве END, чтобы
указать, с какой команды начинается программа.</p>

<p class=bodytext>Команда MOV АН,9 помещает число 9 в регистр АН. Это&nbsp;—
номер функции DOS «вывод строки».</p>

<p class=bodytext>Команда MOV DX,OFFSET MESSAGE помещает в регистр DX смешение
метки MESSAGE относительно начала сегмента данных, который в нашем случае
совпадает с сегментом кода.</p>

<p class=bodytext>Команда INT 21h вызывает системную функцию DOS. Эта
команда&nbsp;— основное средство взаимодействия программ с операционной
системой. В нашем примере вызывается функция DOS номер 9&nbsp;— вывести строку
на экран. Эта функция выводит строку от начала, адрес которого задается в
регистрах DS:DX, до первого встреченного символа $. При загрузке <span
class=SpellE><span class=GramE>СОМ-файла</span></span> регистр DS автоматически
загружается сегментным адресом программы, а регистр DX был загружен предыдущей
командой.</p>

<p class=bodytext>Команда RET используется обычно для возвращения из процедуры.
DOS вызывает <span class=SpellE><span class=GramE>СОМ-программы</span></span>
так, что команда RET корректно завершает программу.</p>

<p class=bodytext><b style='mso-bidi-font-weight:normal'>DOS при вызове <span
class=SpellE><span class=GramE>СОМ-файла</span></span> помещает в стек
сегментный адрес программы и ноль, так что RET передает управление на нулевой
адрес текущего сегмента, то есть на первый байт PSP. Там находится код команды
INT 20h, которая и используется для возвращения управления в DOS. Можно сразу
заканчивать программу командой INT 20h, хотя это длиннее на 1 байт.<o:p></o:p></b></p>

<p class=bodytext>Следующая строка программы HELLO-1.ASM определяет строку
данных, содержащую текст «<span class=SpellE>Hello</span> <span class=SpellE>World</span>!»,
управляющий символ ASCII «возврат каретки» с кодом 0Dh, управляющий символ
ASCII «перевод строки» с кодом 0Ah и символ «$», завершающий строку. Эти два
управляющих символа переводят курсор на первую позицию следующей строки точно
так же, как в строках на языке<span class=GramE> С</span> действует
последовательность «\<span class=SpellE>n</span>».</p>

<p class=bodytext><span class=GramE>И</span> наконец, директива END завершает
программу, одновременно указывая, с какой метки должно начинаться выполнение
программы.</p>

<h2>Программа типа ЕХЕ</h2>

<p class=bodyfirst><span class=SpellE>ЕХЕ-программы</span> немного сложнее в
исполнении, но для них отсутствует ограничение размера в 64 килобайта, так что
все достаточно большие программы используют именно этот формат. Конечно,
ассемблер позволяет уместить и в 64 килобайтах весьма сложные и большие
алгоритмы, а все данные хранить в отдельных файлах, но ограничение размера все
равно очень серьезно, и даже чисто ассемблерные программы могут с ним
сталкиваться.</p>

<pre>; hello-2.asm</pre><pre>; Выводит на экран сообщение &quot;<span
class=SpellE>Hello</span> <span class=SpellE>World</span>!&quot; и завершается</pre><pre><span style='mso-spacerun:yes'>        </span>.<span
class=SpellE>model</span><span style='mso-spacerun:yes'>     </span><span
class=SpellE>small</span><span class=GramE><span style='mso-spacerun:yes'>             </span>;</span> модель памяти, используемая для ЕХЕ</pre><pre><span style='mso-spacerun:yes'>        </span>.<span
class=SpellE>stack</span><span style='mso-spacerun:yes'>     </span>100h<span
class=GramE><span style='mso-spacerun:yes'>              </span>;</span> сегмент стека размером в 256 байт</pre><pre><span style='mso-spacerun:yes'>        </span>.<span
class=SpellE>code</span></pre><pre><span class=SpellE>start</span>:<span style='mso-spacerun:yes'>  </span><span
class=SpellE>mov</span><span style='mso-spacerun:yes'>        </span><span
class=SpellE>ax,DGROUP</span><span class=GramE><span style='mso-spacerun:yes'>         </span>;</span> сегментный адрес строки <span
class=SpellE>message</span></pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE>mov</span><span style='mso-spacerun:yes'>        </span><span
class=SpellE>ds,ax</span><span class=GramE><span style='mso-spacerun:yes'>         </span><span style='mso-spacerun:yes'>    </span>;</span> помещается в DS</pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>mov</span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>        </span><span
class=SpellE>dx,offset</span> message<o:p></o:p></span></pre><pre><span
lang=EN-US style='mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>        </span><span
class=SpellE><span class=GramE>mov</span></span><span style='mso-spacerun:yes'>        </span>ah,9<o:p></o:p></span></pre><pre><span
lang=EN-US style='mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>        </span></span><span
class=SpellE>int</span><span style='mso-spacerun:yes'>        </span>21h<span
class=GramE><span style='mso-spacerun:yes'>               </span>;</span> функция DOS &quot;вывод строки&quot;</pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE>mov</span><span style='mso-spacerun:yes'>        </span>ax,4C00h</pre><pre><span style='mso-spacerun:yes'>        </span><span
class=SpellE>int</span><span style='mso-spacerun:yes'>        </span>21h<span
class=GramE><span style='mso-spacerun:yes'>               </span>;</span> функция DOS &quot;завершить программу&quot;</pre><pre><span style='mso-spacerun:yes'>      </span><span style='mso-spacerun:yes'>  </span><span
lang=EN-US style='mso-ansi-language:EN-US'>.data<o:p></o:p></span></pre><pre><span
class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>message</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> db<span style='mso-spacerun:yes'>         </span>&quot;Hello World!&quot;,0Dh,0Ah,'$'<o:p></o:p></span></pre><pre><span
lang=EN-US style='mso-ansi-language:EN-US'><span style='mso-spacerun:yes'>        </span></span><span
class=SpellE>end</span><span style='mso-spacerun:yes'>        </span><span
class=SpellE>start</span></pre>

<p class=bodytext>В этом примере определяются три сегмента&nbsp;— сегмент стека
директивой .STACK размером в 256 байт, сегмент кода, начинающийся с директивы
.CODE, и сегмент данных, начинающийся с .DATA и содержащий строку. При запуске <span
class=SpellE>ЕХ<span class=GramE>E</span>-программы</span> регистр DS уже не
содержит адреса сегмента со строкой <span class=SpellE>message</span> (он
указывает на сегмент, содержащий блок данных PSP), а для вызова используемой
функции DOS этот регистр должен иметь сегментный адрес строки. Команда
MOV&nbsp;AX,DGROUP загружает в АХ сегментный адрес группы сегментов данных
DGROUP, <span class=SpellE>a</span> MOV&nbsp;DS,AX копирует его в DS. Для
ассемблеров MASM и TASM можно использовать вместо DGROUP предопределенную метку
«@<span class=SpellE>data</span>», но единственная модель памяти, в которой
группа сегментов данных называется иначе,&nbsp;— FLAT (ей мы пока пользоваться
не будем). <span class=GramE>И</span> наконец, программы типа ЕХЕ должны
завершаться системным вызовом DOS 4Ch: в регистр АН помещается значение 4Ch, в
регистр AL помещается код возврата (в данном примере код возврата 0 и регистры
АН и AL загружаются одной командой MOV AX,4C00h), после чего вызывается
прерывание 21h.</p>

<p class=bodytext>Компиляция hello-2.asm:</p>

<p class=bodytext>Для<span lang=EN-US style='mso-ansi-language:EN-US'> TASM:<o:p></o:p></span></p>

<pre><span class=SpellE><span class=GramE><span lang=EN-US style='mso-ansi-language:
EN-US'>tasm</span></span></span><span lang=EN-US style='mso-ansi-language:EN-US'> hello-2.asm<o:p></o:p></span></pre><pre><span
class=SpellE><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>tlink</span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> /x hello-2.obj<o:p></o:p></span></pre>

<p class=bodytext>Размер получаемого файла hello-2.exe&nbsp;— 559 байт.</p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:"Times New Roman"'><span
style='mso-tab-count:1'>            </span><b style='mso-bidi-font-weight:normal'>Содержание
отчета</b></span><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:12.0pt;font-family:"Times New Roman";mso-ansi-language:EN-US'>:</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:21.3pt;text-align:justify;text-indent:
-14.15pt;mso-pagination:widow-orphan;mso-list:l2 level1 lfo8;mso-layout-grid-align:
auto;text-autospace:ideograph-numeric ideograph-other'><![if !supportLists]><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><span style='mso-list:Ignore'>1. <span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span></span></b><![endif]><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Название работы<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.3pt;text-align:justify;text-indent:
-14.15pt;mso-pagination:widow-orphan;mso-list:l2 level1 lfo8;mso-layout-grid-align:
auto;text-autospace:ideograph-numeric ideograph-other'><![if !supportLists]><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><span style='mso-list:Ignore'>2. <span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span></span></b><![endif]><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Цель работы<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.3pt;text-align:justify;text-indent:
-14.15pt;mso-pagination:widow-orphan;mso-list:l2 level1 lfo8;mso-layout-grid-align:
auto;text-autospace:ideograph-numeric ideograph-other'><![if !supportLists]><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><span style='mso-list:Ignore'>3. <span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span></span></b><![endif]><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Приборы и оборудование<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.3pt;text-align:justify;text-indent:
-14.15pt;mso-pagination:widow-orphan;mso-list:l2 level1 lfo8;mso-layout-grid-align:
auto;text-autospace:ideograph-numeric ideograph-other'><![if !supportLists]><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><span style='mso-list:Ignore'>4. <span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span></span></b><![endif]><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Краткие теоретические сведения<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.3pt;text-align:justify;text-indent:
-14.15pt;mso-pagination:widow-orphan;mso-list:l2 level1 lfo8;mso-layout-grid-align:
auto;text-autospace:ideograph-numeric ideograph-other'><![if !supportLists]><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><span style='mso-list:Ignore'>5. <span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span></span></b><![endif]><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Индивидуальное задание<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.3pt;text-align:justify;text-indent:
-14.15pt;mso-pagination:widow-orphan;mso-list:l2 level1 lfo8;mso-layout-grid-align:
auto;text-autospace:ideograph-numeric ideograph-other'><![if !supportLists]><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><span style='mso-list:Ignore'>6. <span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span></span></b><![endif]><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Распечатанный те<span class=GramE>кст пр</span>ограммы<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:21.3pt;text-align:justify;text-indent:
-14.15pt;mso-pagination:widow-orphan;mso-list:l2 level1 lfo8;mso-layout-grid-align:
auto;text-autospace:ideograph-numeric ideograph-other'><![if !supportLists]><b
style='mso-bidi-font-weight:normal'><span style='font-size:12.0pt;font-family:
"Times New Roman"'><span style='mso-list:Ignore'>7. <span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span></span></b><![endif]><span style='font-size:12.0pt;font-family:
"Times New Roman"'>Выводы.<o:p></o:p></span></p>

<p class=bodytext><b style='mso-bidi-font-weight:normal'>Вопросы к защите
лабораторной работы.<o:p></o:p></b></p>

<p class=bodytext>1. Этапы получения<span class=GramE><span
style='mso-spacerun:yes'>  </span>.</span>СОМ и .ЕХЕ файлов.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

<a href ="#begin">[Вверх]</a> <a href ="..\lab.htm">[В начало]</a>
</body>

</html>
